---
title: github.io 포스트 암호화 걸기 (보이기만)
date: 2025-09-20 22:38:00 +09:00
categories: [github.io, 내맘대로]
tags: [github.io]
pin: true
---

## 왜?

이번에 HTB 문제를 풀고 하다보니 아무래도 Active 되어있는 머신이면 블로그에 글을 그대로 올리면 안되는 규정이 있었다. 그렇다면 여기에 올리기는 하되 사람들이 못보게 하면 되지 않을까? 물론 나중에 올려도 되게 되면 그 때는 다시 암호를 끄면 되겠지?

## 어떻게? (실패)

딱 내 머리속에 든 생각이다. 어떻게? 어떻게 할건데? 

- [cesar-guillen/Chirpy-Page-Protector-Plugin](https://github.com/cesar-guillen/Chirpy-Page-Protector-Plugin)
- [lilykonings/jekyll-password-protect](https://github.com/lilykonings/jekyll-password-protect)

우린 코딩을 하는 사람이다. 그렇다면 위와 같이 좋은 방법들도 있지만 솔직히 나는 귀찮았다. 그리고 뭔가 이것저것 해야하는 것들이 많기에.. 그냥 매번 하던 것 처럼 `md`파일 가장 위에 `password` 하나 띡 넣고 거기 옆에 비밀번호를 넣어 비밀번호 걸린 것 처럼 보이게 하고 싶었다.

그래서 `post.html`을 내맘대로 바꾸기로 했다.

아 물론 난 디자인이나 이런건 잘 못해서 되게 테마와 맞지 않다. 그리고  솔직히 암호화나 보안을 위한 것 보단 컴퓨터를 잘 모르는 사람이라면 이거 잠겼네 싶은 생각이 들게 만들고 싶을 뿐이다.

```html
  <div class="content">
    {% if page.password %}
      <div id="locked-content">
        <p>이 게시물은 비밀번호로 보호되어 있습니다.</p>
        <input type="password" id="post-password" placeholder="비밀번호 입력">
        <button onclick="unlockPost()">확인</button>
        <div id="wrong-pass" style="color:red; display:none;">비밀번호가 틀렸습니다.</div>
      </div>

      <div id="real-content" style="display:none;">
        {{ content }}
      </div>

      <script>
        function unlockPost() {
          const input = document.getElementById("post-password").value;
          const correct = "{{ page.password }}"; // Front Matter password 값
          if (input === correct) {
            document.getElementById("locked-content").style.display = "none";
            document.getElementById("real-content").style.display = "block";
          } else {
            document.getElementById("wrong-pass").style.display = "block";
          }
        }
      </script>
    {% else %}
      {{ content }}
    {% endif %}
  </div>
```

원래 chirpy 테마를 복사해간 사람이 있다면 본래의 post.html과 비교해보라. 위 방식을 이용해 post.html을 만들면 확실히 그럴싸해 보인다.

[oil-lamp-cat/Chirpy-Them-Post-look-like-password](https://github.com/oil-lamp-cat/Chirpy-Them-Post-look-like-password)

전체 코드는 여기 있으니 확인해보면 된다.

그리고 지금 테마와 매우 맞지 않는 버튼이나 입력칸이 있을텐데 그건 나중에 머리 식으면 혹은 더 하고 싶을 때 오겠다.

## 성공

이게 참 어지러운게 local에서 jekyll 서버 열어서 실행해보면 잘 되는데 정작 github 페이지로 올리면 안되는 문제가 있어서 어제 하기엔 이미 HTB 문제 풀며 머리가 아파와 하루 쉬고 오늘 다시 구현에 성공했다.

![password protection](https://github.com/user-attachments/assets/9f3bb31f-0bae-4777-ad89-f7b2eddb757a)

디자인은 `Claude`를 이용했으니 참고바란다.

[oil-lamp-cat/Chirpy-Them-Post-look-like-password](https://github.com/oil-lamp-cat/Chirpy-Them-Post-look-like-password)

그럼 무엇이 문제였던것인지 알아보자.

## 문제였던 것

- Jekyll/Liquid 충돌 : `{{ page.password }}`와 같은 `Liquid 태그`가 JavaScript 안에서 파싱 오류 발생
- 인라인 이벤트 : `onclick="checkPassword()"` 방식이 Jekyll 빌드 과정에서 함수 정의보다 먼저 실행됨
- 스코프 문제 : 전역 함수 선언이 Jekyll의 템플릿 처리 과정에서 꼬임
- DOM 로딩 타이밍 : 스크립트가 DOM 요소들보다 먼저 실행되는 경우

정도가 되겠고 솔직히 이것도 gemini나 chatgpt는 문제를 못 찾았었는데 역시 코딩에는 claude가 쓰기 좋은 것 같다.